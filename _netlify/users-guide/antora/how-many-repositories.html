<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Structuring Antora repositories :: Project Aris</title>
    <link rel="canonical" href="https://docs.waxc.tech/users-guide/antora/how-many-repositories.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="generated-content-in-antora.html">
    <meta name="description" content="How many repositories to use for components and playbooks in when using Antora together with the AsciiDoc Plugin for IntelliJ.">
    <meta name="generator" content="Antora 3.1.3">
<!-- https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="../../antora/css/site.css">
<link rel="stylesheet" href="../../antora/css/search.css">
<link rel="stylesheet" href="../../antora/css/custom.css">
<link rel="stylesheet" href="../../antora/css/font-awesome.min.css">
    <script>var uiRootPath = '../../antora'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/"><img src="/assets/images/ad-logo.svg" height="40" width="40" class="logo" style="margin-right: 0.55rem" alt=""> Project Aris</a>
            <div class="navbar-item search hide-for-print">
                <div id="search-field" class="field has-filter">
                    <input id="search-input" type="text" placeholder="Search the docs">
                        <input checked style="display: none" type="checkbox" data-facet-filter="component:users-guide">
                </div>
            </div>
        <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <a href="/docs/users-guide/quick-start.html">Quick-Start</a>
        </div>
          <div class="navbar-item">
              <a href="/docs/users-guide/index.html">User’s Guide</a>
          </div>
          <div class="navbar-item">
              <a href="/docs/contributors-guide/index.html">Contributor’s Guide</a>
          </div>
        <div class="navbar-item">
          <a href="/docs/users-guide/faq.html">FAQ</a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="users-guide" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">User’s Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item is-current-path is-active" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../quick-start.html">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installation.html">Installing the plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../technical-writing/index.html">Setup for technical writing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/installing-intellij.html">Installing IntelliJ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/starting-intellij-first-time.html">Starting IntelliJ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/opening-the-first-project.html">Opening a project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/editing-an-asciidoc-file.html">Editing an AsciiDoc file</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/navigating-in-a-project.html">Navigating in a project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/searching-in-a-project.html">Searching in a project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/learning-asciidoc-syntax.html">Learning AsciiDoc syntax</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/using-tables-in-a-project.html">Using tables in AsciiDoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/git-integration.html">Collaborate using Git</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/preparing-a-repository.html">Preparing a repository</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/using-antora-with-intellij.html">Using Antora with IntelliJ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/recommended-plugins.html">Recommended Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technical-writing/getting-help.html">Getting help</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-path is-active" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Decisions around Antora</a>
<ul class="nav-list">
  <li class="nav-item is-current-page is-active" data-depth="2">
    <a class="nav-link" href="how-many-repositories.html">Structuring Antora repositories</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="generated-content-in-antora.html">Generated content and attachments</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../recommended-settings.html">Configuring the plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../features.html">Plugin&#8217;s Features</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/editor.html">Editing Content</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/keymap.html">Using Hotkeys</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../features/search.html">Searching content</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../features/preview.html">Previewing content</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/preview/diagrams.html">Diagrams in the preview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/preview/javafx-preview.html">JavaFX Preview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/preview/jcef-preview.html">JCEF Preview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/preview/source-highlighting.html">Highlighting source code</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/asciidoclet.html">Asciidoclet</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/asciidoctorconfig-file.html">Asciidoctor Config File</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/asciidoctor-extensions.html">Asciidoctor Extensions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/conditional-rendering.html">Conditional Rendering</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/stylesheets.html">Custom stylesheets</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/creating-docx.html">Creating DOCX</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/creating-html.html">Creating HTML</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/creating-pdf.html">Creating PDF</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/frontmatter.html">Front matter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/grammar-checking.html">Checking the Grammar</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/livetemplates.html">Live Templates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/multimodule.html">Multi-module Projects</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/validation-in-ide.html">Validation in the IDE</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/validation-cicd.html">Validation in CI/CD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/pdf-non-latin-languages.html">PDFs with non-latin fonts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/privacy.html">Privacy for users</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/reformatting.html">Reformatting Content</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/spring-rest-docs.html">Spring REST Docs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/antora.html">Working with Antora</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../features/advanced/hugo.html">Working with Hugo</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../faq.html">Frequently asked questions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/indent-missing-on-pasting.html">Indent missing when pasting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/jcef-no-proxy-support.html">Proxy issues JCEF preview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/javafx-initialization-stuck.html">JavaFX initialization stuck</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/validation-for-asciidoc-files.html">Validation of files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/blurry-preview.html">JavaFX blurry preview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/errno-enoent.html">Error Message ENOENT</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/troubleshooting-mps.html">Troubleshooting MPS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/diagrams-in-pdf-without-text.html">Problems with Diagrams in PDFs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../faq/could-not-find-dot-executable.html">Could not render diagrams with external helpers</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User’s Guide</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../body-of-knowledge/index.html">Body of Knowledge</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../body-of-knowledge/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../contributors-guide/index.html">Contributor’s Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../contributors-guide/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">User’s Guide</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../body-of-knowledge/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">User’s Guide</a></li>
    <li><a href="index.html">Decisions around Antora</a></li>
    <li><a href="how-many-repositories.html">Structuring Antora repositories</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/mac/Repo/aris/antora/doc/users-guide/modules/ROOT/pages/antora/how-many-repositories.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Structuring Antora repositories</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>How many repositories to use for components and playbooks in when using Antora together with the AsciiDoc Plugin for IntelliJ.</p>
</div>
<div class="paragraph">
<p>This is part of a decision guide for technical writing environments with Antora and the AsciiDoc plugin for IntelliJ.
See the page <a href="index.html" class="xref page">Decisions around Antora</a> for prerequisites and other decisions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview-for-different-options"><a class="anchor" href="#overview-for-different-options"></a>Overview for different options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The introduction to using Antora with IntelliJ described <a href="../technical-writing/using-antora-with-intellij.html#basic-structure-of-an-antora-setup" class="xref page">the setup of using multiple content repositories with Antora components and an additional Git repository for the playbook</a>.
This section describes that setup in more details and its alternatives:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How many content repositories to have.</p>
</li>
<li>
<p>Where to store the different component versions (in branches or folders in the main branch).</p>
</li>
<li>
<p>Where to store the playbooks.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the following table show the set of combinations:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Content Repositories</th>
<th class="tableblock halign-left valign-top">Versions</th>
<th class="tableblock halign-left valign-top">Playbook Repository</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-1">Multiple repositories</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-1">In branches</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-1">Separate repository</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-2">Single repository</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-2">In branches</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-2">Separate repository</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-3">Single repository</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-3">In branches</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-3">Separate branch</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-4">Single repository</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-4">In folders</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#variant-4">In the content repository</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="variant-1"><a class="anchor" href="#variant-1"></a>Multiple content repositories with Antora components, additional Git repository for the playbook</h3>
<div class="paragraph">
<p>One of the most outstanding features of Antora is to pull content from multiple repositories and branches and create one consistent site from it where all links work and are checked at build-time.</p>
</div>
<div class="paragraph">
<p>Those different content repositories offer possibilities which can be useful in a specific scenario:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each repository could be maintained by different people with separate responsibilities and permissions.</p>
</li>
<li>
<p>Some repositories could contain generated content, other repositories could contain content created by humans.</p>
<div id="antora-collector" class="paragraph">
<p>For content which can be generated on the fly, the <a href="https://gitlab.com/antora/antora-collector-extension">Antora Collector extension</a> can help as it allows to use generate the content when building the site which removes the need to store it in a Git repository.
Having it separated would ensure that humans don&#8217;t interfere with generated content.
This comes with the trade-off that it can slow down the generation of the final site.</p>
</div>
</li>
<li>
<p>Some repositories could be public and would allow contributors to read and contribute to the site&#8217;s source, while others would be private.
Still, all combined repositories could be used to create one public site.
As an alternative, different playbooks could create different public or private sites with different combinations of the content repositories.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While the content repositories change when the content changes, the Antora playbook changes when new components or versions appear, and the UI changes when the user experience changes or the design changes.
As they change for different reasons than the content, they should get a different place, therefore, they should get their own repository.
Also, there might be different people responsible for the layout of the site and the content published, another indication for an extra repository.</p>
</div>
<div class="paragraph">
<p>There is a cost of changing this later:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When combining multiple repositories with the content in branches into a lower number of repositories or a single repository, this is a tedious task as all branches will need to receive the right content.
Upon moving the content, the Git history will be cut in the middle: The old history will stay in the old repository, and won&#8217;t be moved.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With so many repositories, there are some tradeoffs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a user needs to contribute to multiple repositories, they would need to check out all of them one by one.
If this is the case for a lot of users, this might indicate that repositories should be consolidated to fewer repositories, but it would require that the components in one repository follow the same versioning scheme, as tags and branches in repositories should match the versions of the components.</p>
</li>
<li>
<p>To build an author&#8217;s preview, all repositories would need to be checked out, as it would expect all repositories to be available locally.
As an alternative, different author&#8217;s playbooks could be offered which use some local repositories and some remote repositories.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a scenario where the components are very independent and have only a few links between them, an author could simplify the setup as follows if they skip the build with the author&#8217;s playbook and rely on the IDE&#8217;s features for validation and preview.
See <a href="#author-preview-in-ide">Author preview in the IDE</a> below.</p>
</div>
<div class="paragraph">
<p>The upcoming scenarios attempt to remedy these tradeoffs at the cost of limiting the possibilities described in this paragraph which might not be needed in all situations.</p>
</div>
</div>
<div class="sect2">
<h3 id="variant-2"><a class="anchor" href="#variant-2"></a>Single content repositories with Antora components, additional Git repository for the playbook</h3>
<div class="paragraph">
<p>In this scenario, all components are stored in one Git repository.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Antora supports placing them in different folders, so different responsibilities can be mapped to different folders.
<a href="https://docs.antora.org/antora/latest/playbook/content-source-start-paths/">Antora supports multiple start paths in the same repository</a>.</p>
</li>
<li>
<p>Placing generated content into the single Git repository is not recommended, as it would create lots of history entries which could disturb users.
See the information about <a href="#antora-collector">Antora collector</a> above to generate content on-the-fly.</p>
</li>
<li>
<p>All users can see all content.
Permission to change could be managed with <a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners">GitHub code owners</a> which would handle the approval of pull requests for their content.</p>
</li>
<li>
<p>Users need to check out only a single content repository, and all cross-references between components will work.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As content exists in different branches, the repository with the playbook and the UI has only a single main branch.
Having those repositories separate helps to have the up-to-date UI in a separate folder while switching the other folder between releases and feature branches.
Also, there might be different people responsible for the layout of the site and the content published, another indication for an extra repository.</p>
</div>
<div class="paragraph">
<p>There is a cost of changing this later:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When separating a single repository into multiple repositories, this is a tedious task as all branches will need to receive the right content.
Upon moving the content, the Git history will be cut in the middle: The old history will stay in the old repository, and won&#8217;t be moved.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When users check out only the content repository, the following setup might be simplifying it for writers:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Duplicate the necessary attributes from the playbook in the <code>.asciidoctorconfig</code> file as described in <a href="../technical-writing/preparing-a-repository.html#provide-hints-for-the-preview-with-asciidoctorconfig" class="xref page">Provide hints for the preview with <code>.asciidoctorconfig</code></a>, and</p>
</li>
<li>
<p>Configure the stylesheet for the IDE&#8217;s preview as described in <a href="../technical-writing/using-antora-with-intellij.html#site-css-in-the-preview" class="xref page">Using the site&#8217;s CSS in the preview</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This setup might be good enough so that the authors don&#8217;t need to build a local author&#8217;s preview.</p>
</div>
<div class="paragraph">
<p>While this comes with the cost of maintaining the playbook&#8217;s attributes in a second place, it might still be a viable alternative.</p>
</div>
</div>
<div class="sect2">
<h3 id="variant-3"><a class="anchor" href="#variant-3"></a>Single repository for everything, separate branch for the playbook</h3>
<div class="paragraph">
<p>This setup is very similar to the previous setup <a href="#variant-2">Single content repositories with Antora components, additional Git repository for the playbook</a>: The user has a parent folder with two folders, one for the content, another for the playbook.</p>
</div>
<div class="paragraph">
<p>To create two worktrees from a single repository, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the parent folder.</p>
</li>
<li>
<p>Check out the content repository as before into the content folder.</p>
</li>
<li>
<p>Create a second worktree, by issuing a command like the following on the command line in the content folder:</p>
<div class="listingblock">
<div class="content">
<pre>git worktree add --track -b &lt;branch&gt; &lt;path&gt; &lt;remote&gt;/&lt;branch&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>See the <a href="https://git-scm.com/docs/git-worktree">Git worktree documentation</a> for details.
The branch can be switched independently in each worktree, but no two worktrees must be on the same branch.</p>
</div>
<div class="paragraph">
<p>To set up the branch for the playbook, it should be a detached branch that doesn&#8217;t have a common parent with the content branch.</p>
</div>
<div class="paragraph">
<p>Such a setup can help if having a separate repository for the playbook is difficult in an organization.
Having a separate detached branch for the playbook is technically well-supported by Git, still it is not a common practice, so it will need an extra effort for the authors to understand the setup.
If authors use the IDE for the preview as described in</p>
</div>
<div class="paragraph">
<p>Such a setup can be changed to a setup with a separate playbook repository at any time without losing the Git history of the playbook.</p>
</div>
</div>
<div class="sect2">
<h3 id="variant-4"><a class="anchor" href="#variant-4"></a>Single repository for everything, playbook in the main branch</h3>
<div class="paragraph">
<p>In this variant the authors check out only one repository with both the content and the playbook.
As the playbook is in the main branch, it is not possible to switch between branches for different actively maintained versions, as the author would then lose the access to the most recent playbook.</p>
</div>
<div class="paragraph">
<p>Such a single-repository-setup is only possible when the different component versions are not stored in different branches, but in different folders in the main branch.</p>
</div>
<div class="paragraph">
<p>Such a setup looks simple at the start.
With the growing number of versions, the number of folders will grow and authors might be confused which folder to edit.
When the setup is restructured to a component versions in branches, the history would be cut-off.</p>
</div>
<div class="paragraph">
<p>When maintaining multiple versions, files in different folders need to change.
If the versions would be in different branches, the authors could use the Git functionality of cherry-picking changes from one branch to another.</p>
</div>
</div>
<div class="sect2">
<h3 id="author-preview-in-ide"><a class="anchor" href="#author-preview-in-ide"></a>Author preview in the IDE</h3>
<div class="paragraph">
<p>Having a separate playbook for an author&#8217;s preview will give the best possible preview.</p>
</div>
<div class="paragraph">
<p>Still it has an additional effort for the author:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install node on the machine they are authoring content, or use a pre-packaged setup which utilizes containers with tools like Docker or Podman.</p>
</li>
<li>
<p>Run a local webserver to view the locally generated site.</p>
</li>
<li>
<p>The turnaround time for the site to build locally.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>With the following steps, the preview in the IDE might be enhanced sufficiently enough to skip the local preview build for the authors.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check out only the one or the few repositories content repositories the authors are interested in.</p>
</li>
<li>
<p>Duplicate the necessary attributes from the playbook in the <code>.asciidoctorconfig</code> file as described in <a href="../technical-writing/preparing-a-repository.html#provide-hints-for-the-preview-with-asciidoctorconfig" class="xref page">Provide hints for the preview with <code>.asciidoctorconfig</code></a>.</p>
</li>
<li>
<p>Configure the stylesheet for the IDE&#8217;s preview as described in <a href="../technical-writing/using-antora-with-intellij.html#site-css-in-the-preview" class="xref page">Using the site&#8217;s CSS in the preview</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While this comes with the cost of maintaining the playbook&#8217;s attributes in multiple places, it might still be a viable alternative.</p>
</div>
<div class="paragraph">
<p>When only a single content repository out of many is checked out, links to components in other repositories will not show the page title, can&#8217;t be validated in the IDE and can&#8217;t be navigated to.
This might change in a future version of the AsciiDoc plugin for IntelliJ once Antora Atlas is supported: With the information stored in the site manifest, the local IDE can retrieve the page titles of the pages in other components together with their links to the final site.
Follow <a href="https://github.com/asciidoctor/asciidoctor-intellij-plugin/issues/1250">GitHub issue #1250</a> for the progress on this issue.</p>
</div>
<div class="paragraph">
<p>It is still a good practice to build a preview for pull requests on the server to see the results for changes before the changes are merged and published to the live site.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">Decisions around Antora</a></span>
  <span class="next"><a href="generated-content-in-antora.html">Generated content and attachments</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
    <p>This page was built using <a href="https://antora.org/" rel="nofollow">Antora</a> - © 2023 WAXC Tech. Released under the Apache License, Version 2.0 - <a href="https://github.com/asciidoctor/asciidoctor-intellij-plugin" rel="nofollow">GitHub</a> - <a href="/imprint" rel="nofollow">Imprint</a> - <a href="/privacy" rel="nofollow">Privacy</a></p>
</footer>
<div id="myModal" class="modal">
    <span class="close cursor" onclick="closeModal()">&times;</span>
    <div class="modal-content" onclick="closeModal()">
        <!--suppress HtmlRequiredAltAttribute as this will be set when selecting the image via JavaScript,
        RequiredAttributes as src will be set by when selecting the image via JavaScript -->
        <img id="imageinmodal">
    </div>
</div>
<script>
    function openModal() {
        document.getElementById("myModal").style.display = "block";
        // use overflowY = hidden to prevent the body from scrolling when modal is visible
        // doesn't work with overscroll-behavior, as this would work only when the modal has a scrollbar
        document.getElementsByTagName("body")[0].style.overflowY = "hidden";
    }

    function closeModal() {
        document.getElementById("myModal").style.display = "none";
        document.getElementsByTagName("body")[0].style.overflowY = "auto";
    }

    document.querySelectorAll('.imageblock img').forEach(element => {
        if (element.closest('a') === null) {
            element.className += " lightbox";
            element.addEventListener('click', evt => {
                document.getElementById("imageinmodal").setAttribute("src", evt.currentTarget.getAttribute("src"))
                document.getElementById("imageinmodal").setAttribute("alt", evt.currentTarget.getAttribute("alt"))
                openModal();
            })
        }
    });
</script>
<style>
    /* The Modal (background) */
    .modal {
        display: none;
        position: fixed;
        z-index: 10;
        padding-top: 5vh;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        backdrop-filter: blur(3px);
        background-color: rgba(30, 30, 30, 0.8);
    }
    img.lightbox {
        cursor: pointer;
    }
    /* Modal Content */
    .modal-content {
        position: relative;
        margin: auto;
        padding: 0;
        width: 90%;
        max-height: 90vh;
        cursor: pointer;
    }

    .modal-content img {
        width: auto;
        height: auto;
        max-width: 90vw;
        max-height: 90vh;
        min-width: 90vw;
        min-height: 90vh;
        display: block;
        margin-right: auto;
        margin-left: auto;
        object-fit: contain;
    }

    /* The Close Button */
    .close {
        color: white;
        position: absolute;
        top: 10px;
        right: 25px;
        font-size: 35px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: #999;
        text-decoration: none;
        cursor: pointer;
    }
</style>
<script src="../../antora/js/os-switcher.js"></script>
<script>
    const navbarEl = document.getElementsByClassName("navbar")[0]
    const toolbarEl = document.getElementsByClassName("toolbar")[0]
    let NAVBAR_HEIGHT
    let horizon
    let scrollFactor = 0
    let whereYouStoppedScrolling = 0
    let currentTranslate = 0
    let currentStyle = ""

    function upOrDown(lastY, currentY) {
        if (currentY >= lastY) {
            return goingDown(currentY)
        }
        return goingUp(currentY)
    }

    function goingDown(currentY) {
        whereYouStoppedScrolling = currentY

        if (currentY > horizon) {
            horizon = currentY
        }

        translateHeader(currentY, false)
    }

    function goingUp(currentY) {
        if (currentY < whereYouStoppedScrolling - NAVBAR_HEIGHT) {
            horizon = currentY + NAVBAR_HEIGHT
        }

        translateHeader(currentY, true)
    }

    function constrainDelta(delta) {
        return Math.max(0, Math.min(delta, NAVBAR_HEIGHT))
    }

    function translateHeader(currentY, upwards) {
        let translateValue

        // if I have scrolled down sufficiently, the navbar appears faster
        if (currentY > NAVBAR_HEIGHT * 2) {
            scrollFactor = 1
        } else if (currentY > NAVBAR_HEIGHT) {
            scrollFactor = (currentY - NAVBAR_HEIGHT) / NAVBAR_HEIGHT
        } else {
            scrollFactor = 0
        }

        if (upwards && currentTranslate === 0) {
            translateValue = 0
        } else {
            const delta = constrainDelta(
                    Math.abs(currentY - horizon) * (1 + scrollFactor)
            )
            translateValue = delta - NAVBAR_HEIGHT
        }

        if (window.innerWidth > 1024) {
            translateValue = 0
        } else if (document.getElementsByClassName("nav-container")[0].classList.contains("is-active")) {
            translateValue = 0
        }

        if (!isNaN(translateValue)) {
            let navbarStyle = `transition: transform 0.5s ease-out; transform: translateY(${translateValue}px);`
            if (translateValue === -NAVBAR_HEIGHT) {
                navbarStyle = `transition: transform 0.5s ease-out; transform: translateY(${translateValue}px);`
            }
            if (currentY <= NAVBAR_HEIGHT) {
                navbarStyle = `transform: translateY(${translateValue}px);`
            }
            currentTranslate = translateValue
            if (currentStyle !== navbarStyle) {
                currentStyle = navbarStyle
                navbarEl.setAttribute("style", navbarStyle)
                toolbarEl.setAttribute("style", navbarStyle)
            }
        }
    }

    translateHeader(window.scrollY, false)

    let ticking = false
    let lastY = 0

    window.addEventListener("scroll", function () {
        if (NAVBAR_HEIGHT === undefined) {
            // lazy initialization on first scroll
            NAVBAR_HEIGHT =
                    parseInt(window.getComputedStyle(navbarEl).height.replace("px", "")) +
                    1
            horizon = NAVBAR_HEIGHT
        }
        const currentY = window.scrollY

        if (!ticking && window.requestAnimationFrame) {
            window.requestAnimationFrame(function () {
                upOrDown(lastY, currentY)
                ticking = false
                lastY = currentY
            })
        }

        ticking = true
    })

    window.addEventListener('resize', function () {
        NAVBAR_HEIGHT = undefined
        const currentY = 0
        upOrDown(lastY, currentY)
        lastY = currentY
        return true
    })


    document.getElementsByClassName("nav-toggle")[0].addEventListener("click", function () {
        const currentY = 0
        upOrDown(lastY, currentY)
        lastY = currentY
        return true
    })

</script>
<script>
  window.antora = window.antora || {}
  window.antora.basePath = '../..'
  window.antora.pagePath = '/users-guide/antora/how-many-repositories.html'
</script>
<script src="../../antora/js/site.js"></script>
<script src="../../antora/js/vendor/lunr.js"></script>
<script src="../../antora/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../antora/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
